/*! Publicity 2015-06-07 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,b,c,d,e,f){var g={init:function(){a("#footer").headroom(),a("#nav").headroom({offset:800}),e.initHighlightingOnLoad()}};a(c).ready(g.init)}(jQuery,window,document,Headroom,hljs);var d=function(a,b,c,d,e){function f(){return i||(i=new g),i}function g(){var b={ReactCSSTransitionGroup:d.addons.CSSTransitionGroup,stack:[],emptyCard:{headline:"",url:"#",image:"http://placehold.it/320x240"},getStack:function(){return this.stack},foo:[],options:{cardClass:"publicity-card",gridClass:"publicity-arrangement"},internal_count:1,internal_offset:1,sponsored_count:1,sponsored_offset:1,init:function(){return b.createComponents(),a.each(a(".publicity-card"),function(a,c){b.buildCard(c)}),a.each(a(".publicity-arrangement"),function(a,c){b.buildArrangement(c)}),b.buildArrangement(c.getElementById("example_grid")),b.buildArrangement(c.getElementById("example_grid_1x2")),this},enableTouchEventHandling:function(){d.initializeTouchEvents(!0)},fetchCard:function(c,d,e,f,g,i){if(c)var j=c;else var j=a(".card:first");d||(d=parseInt(j.attr("data-offset"))),e||(e=parseInt(j.attr("data-count"))),f||(f=parseInt(j.attr("data-sp-offset"))),g||(g=parseInt(j.attr("data-sp-count"))),b.internal_count=d||1,b.internal_offset++,b.sponsored_count=g||1,b.sponsored_offset++;a.ajax({url:h.API.endpoint,type:"get",dataType:h.API.type,cache:!1,data:{api_key:h.API.api_key,pub_id:h.API.pub_id,widget_id:h.API.widget_id,type:h.API.type,domain:h.API.domain,sponsored_count:b.sponsored_count,sponsored_offset:b.sponsored_offset},beforeSend:function(){b.hideDismissal(j),b.activateLoader(j)},success:function(c){if(c.length>0&&(b.stack.push(c[0]),"object"==typeof i&&i.isMounted())){if(i.setState({internal_count:b.internal_count,internal_offset:b.internal_offset,sponsored_count:b.sponsored_count,sponsored_offset:b.sponsored_offset}),"object"==typeof i.props.myArrangement){var d=i.props.myArrangement.props.data,e=i.props.myKey;isNaN(e)&&(e=d.length),d[e]=b.stack[b.stack.length-1],i.props.myArrangement.setProps({data:d})}else console.log(i),i.setProps({data:b.stack[b.stack.length-1]});a(i.getDOMNode()).find(".loader").hasClass("deactivated")||b.deactivateLoader(a(i.getDOMNode()))}return c.length>0?c:void 0},error:function(a){}})},advanceCounters:function(a,c,d,e){b.internal_count=a||1,b.internal_offset++,b.sponsored_count=e||1,b.sponsored_offset++},retrieveAds:function(c,d,e,f,g,i){a.ajax({url:h.API.endpoint,type:"get",dataType:h.API.type,cache:!1,data:{api_key:h.API.api_key,pub_id:h.API.pub_id,widget_id:h.API.widget_id,type:h.API.type,domain:h.API.domain,sponsored_count:c||b.sponsored_count,sponsored_offset:d||b.sponsored_offset},beforeSend:function(){},success:function(a){a.length>0&&(b.stack.concat(a),"function"==typeof i&&(b.advanceCounters(d,c,d,c),i(a,f,e,d,g)))},error:function(){}})},showDismissal:function(b){return b.find(".dismissal").animate({"margin-top":0},600,"easeOutQuart",function(){a(this).addClass("on").removeClass("off")}),this},hideDismissal:function(b){return b.find(".dismissal").animate({"margin-top":"-600px"},500,"easeInQuart",function(){a(this).removeClass("on").addClass("off")}),this},activateLoader:function(c){return c.find(".overlay").css({backgroundColor:"rgba(0,0,0,0.8)"}),b.dropHeadline(c),c.find(".loader").transition({x:0,y:0,opacity:1},100,"easeOutQuad",function(){a(this).addClass("activated").removeClass("deactivated")}),this},deactivateLoader:function(a){return a.find(".loader").delay(660).transition({x:700,y:-700},660,"easeInQuad",function(){var c=this;a.find(".overlay").animate({backgroundColor:"rgba(0,0,0,0.1)"},1e3,"easeInOutQuint",function(){c.addClass("deactivated").removeClass("activated"),b.raiseHeadline(a)})}),this},raiseHeadline:function(a){return a.find(".headline").hide().css({"z-index":161,opacity:0,bottom:0}).show().animate({opacity:1},327,"easeOutExpo"),this},dropHeadline:function(a){return a.find(".headline").css({opacity:0,"z-index":150,bottom:"-50px"}).animate({},240,"easeInQuad"),this},dockCard:function(c){return b.hideDismissal(c),c.animate({"margin-bottom":"-500px",opacity:0},600,"easeOutSine",function(){a(this).addClass("fixed").addClass("docked")}),setTimeout(function(){b.revealCard(c)},5e3),this},revealCard:function(b){return b.animate({"margin-bottom":0,opacity:1,left:a(".wrapper").offset().left},900,"easeOutExpo",function(){a(this).removeClass("docked")}),this},restoreCard:function(a){return a.removeClass("fixed").removeClass("docked").animate({"margin-bottom":0,opacity:.5,left:0}),this},nextCard:function(a){},switchOverlay:function(b,c){switch(b){case"on":c.find(".overlay").stop(!0,!0).animate({opacity:1},850,"easeOutBack",function(){a(this).removeClass("hover")});break;case"off":c.find(".overlay").stop(!0,!0).animate({opacity:.05},1050,"easeOutSine",function(){a(this).addClass("hover")})}return this},configureCards:function(c){var d=[];d=a(c?c:".card"),a.each(d,function(c,d){a(d).on("mouseenter",function(){b.switchOverlay("off",a(this))}),a(d).on("mouseleave",function(){b.switchOverlay("on",a(this))}),a(d).find(".dismissal").find(".close-dismissal").on("click",function(){b.hideDismissal(a(d))}),a(d).find(".dismissal").find(".remove-ad").on("click",function(){b.nextCard(a(d))}),a(d).find(".close-card").on("click",function(){b.showDismissal(a(d))}),a.each(a(d).find(".dismissal ul").children(),function(b,c){a(c).on("click",function(){a(this).addClass("selected").siblings().removeClass("selected")})}),a("")})},createComponents:function(){b.PosterArrangement=d.createClass({displayName:"PosterArrangement",getInitialState:function(){return{revised_stack:[]}},componentDidMount:function(){this.isMounted()},componentDidUpdate:function(){a(this.getDOMNode()).find(".spinner").css({marginTop:0,opacity:1}).delay(2e3).animate({marginTop:"10px",opacity:0},450,"easeOutExpo",function(){}),a(this.getDOMNode()).find(".load-btn").removeClass("disabled").delay(1e3).animate({opacity:1},450,"easeInQuad",function(){})},componentWillUpdate:function(){a(this.getDOMNode()).find(".load-btn").addClass("disabled").animate({opacity:0},250,"easeOutQuad",function(){}),a(this.getDOMNode()).find(".spinner").css({marginTop:"10px",opacity:0}).show().animate({marginTop:0,opacity:1},650,"easeOutExpo",function(){})},loadMoreCards:function(){var c=this.props.data,d=this;a.ajax({url:h.API.endpoint,type:"get",dataType:h.API.type,cache:!1,data:{api_key:h.API.api_key,pub_id:h.API.pub_id,widget_id:h.API.widget_id,type:h.API.type,domain:h.API.domain,sponsored_count:this.props.loadCount||b.sponsored_count,sponsored_offset:parseInt(a(this.getDOMNode()).find(".card-zone:last").find(".card").attr("data-offset"))||0},beforeSend:function(){},success:function(a){d.setProps({data:c.concat(a)})}})},render:function(){var a=this,c=this.props.branding,e=this.props.data.map(function(e,f){return d.createElement(b.PosterCard,{key:f,data:e,dataOrientation:"left",dataSize:"normal",dataOffset:f,dataAutofill:"false",myKey:f,dataBranding:!0===c?!0:!1,myArrangement:a,ref:"myCard"})});return this.state.revised_stack.length>0&&(alert("Revising Stack!"),e=this.state.revised_stack),d.createElement("div",{className:"card-arrangement",ref:"myArrangement","data-branding":!0===this.props.dataBranding?"true":"false","data-load-more":1==this.props.loadMore?!0:!1,"data-load-count":this.props.loadCount,"data-load-offset":this.props.loadOffset},e,d.createElement("div",{className:"cf"}),this.props.loadMore?d.createElement(b.ArrangementLoader,{onClick:this.loadMoreCards}):"")}}),b.ArrangementLoader=d.createClass({displayName:"ArrangementLoader",getInitialState:function(){return{load_more:!1}},LoadCards:function(a){this.setState({load_more:!0})},componentDidMount:function(){},componentDidUpdate:function(){1==this.state.load_more&&this.isMounted()&&(this.props.onClick(),this.setState({load_more:!1}),a(this.getDOMNode()).find(".spinner").hide())},render:function(){return d.createElement("div",{className:"load-more"},d.createElement("div",{className:"spinner left",style:{display:"none"}},"LOADING"),d.createElement("div",{id:"adPortal",className:"ad-portal"}),d.createElement("a",{className:"load-btn btn btn-small btn-pill right",style:{fontSize:"12px",margin:"18px 10px"},onClick:this.LoadCards},"LOAD MORE"),d.createElement("div",{className:"cf"}))}}),b.PosterCardComponent=b.PosterCard=d.createClass({displayName:"PosterCard",render:function(){return d.createElement("div",{ref:"myPosterCard",className:""!=(this.props.dataOrientation||this.state.orientation)?"card-zone "+this.props.dataOrientation:"card-zone"},d.createElement("div",{className:(""!=(this.props.dataOrientation||this.state.orientation)?"card "+this.props.dataOrientation:"card")+" "+(""!=this.props.dataSize?this.props.dataSize:"normal"),"data-key":this.props.key,"data-branding":1==this.props.dataBranding?!0:this.state.branding,"data-count":this.state.internal_count,"data-offset":this.props.dataOffset||this.state.internal_offset,"data-autofill":this.props.dataAutofill||this.state.autofill,"data-sp-count":this.state.sponsored_count,"data-sp-offset":this.state.sponsored_offset},d.createElement("span",{className:"card-icon restore-card"},d.createElement("i",{className:"oi","data-glyph":"arrow-circle-top"})),d.createElement("span",{className:"card-icon snooze-card"},d.createElement("i",{className:"oi","data-glyph":"timer"})),d.createElement(b.PosterCard.Close,null),d.createElement(b.PosterCard.Loader,null),d.createElement(b.PosterCard.Dismissal,{cardComponent:this}),d.createElement(b.PosterCard.Action,{data:this.props.data,creative:this.props.dataCreative})),this.props.dataBranding?d.createElement(b.PosterCard.Brand,{data:this.props.data}):"")},getInitialState:function(){var a={data:{headline:"Headline",url:"#",image:"http://placehold.it/320x240"},internal_count:1,internal_offset:0,sponsored_count:1,sponsored_offset:0,orientation:"left",size:"normal",branding:!1,autofill:!1};return a},componentWillReceiveProps:function(){},componentWillMount:function(){},componentDidMount:function(){!0===this.props.autoPoll&&this.props.pollInterval>=15e3&&setInterval(this.refreshCard,this.props.pollInterval),b.activateLoader(a(this.getDOMNode()));var c=this;c.isMounted()&&(!0===this.props.dataAutofill||"true"==this.props.dataAutofill?this.refreshCard(this):a(c.getDOMNode()).find(".loader").hasClass("deactivated")||b.deactivateLoader(a(c.getDOMNode())),b.configureCards(a(c.getDOMNode())))},componentWillUpdate:function(){},componentDidUpdate:function(){b.deactivateLoader(a(this.getDOMNode()))},refreshCard:function(c){c||(c=this),b.fetchCard(a(this.getDOMNode()),null,null,null,null,c)}}),b.PosterCard.Loader=d.createClass({displayName:"Loader",render:function(){return d.createElement("div",{className:"loader"},d.createElement("div",{className:"loading"},d.createElement("h2",null,"think bigger ..."),d.createElement("span",null),d.createElement("span",null),d.createElement("span",null),d.createElement("span",null),d.createElement("span",null),d.createElement("span",null),d.createElement("span",null)))}}),b.PosterCard.Dismissal=d.createClass({displayName:"Dismissal",getInitialState:function(){return{dismissal_title:"Select a Reason",dismissed:!1,buttons:{remove:{label:"REMOVE"},cancel:{label:"CANCEL"}}}},dismissCard:function(c){this.setState({dismissed:!0}),b.fetchCard(a(this.getDOMNode()).closest(".card"),null,null,null,null,this.props.cardComponent)},render:function(){return d.createElement("div",{className:"dismissal off"},d.createElement("strong",{className:"dismissal-title"},this.state.dismissal_title),d.createElement("ul",null,d.createElement("li",{className:"selected"},"This ad is misleading"),d.createElement("li",null,"I am unable to view it"),d.createElement("li",null,"Another reason here"),d.createElement("li",null,"TV killed the Radio")),d.createElement("a",{className:"btn btn-small btn-danger btn-primary remove-ad",onClick:this.dismissCard},this.state.buttons.remove.label),d.createElement("a",{className:"btn btn-small btn-success btn-secondary close-dismissal"},this.state.buttons.cancel.label))}}),b.PosterCard.Action=d.createClass({displayName:"Action",render:function(){return d.createElement("a",{href:this.props.data.url!=e?this.props.data.url:this.state.data.url,className:"cta"},d.createElement("div",{className:"image"},d.createElement("img",{className:"image",src:""!=this.props.creative&&this.props.creative!=e?this.props.creative:this.props.data.image!=e?this.props.data.image:this.state.data.image})),d.createElement("div",{className:"headline"},this.props.data.headline!=e?this.props.data.headline:this.state.data.headline),d.createElement("div",{className:"overlay"}))}}),b.PosterCard.Close=d.createClass({displayName:"Close",render:function(){return d.createElement("span",{className:"card-icon close-card"},"Ã—")}}),b.PosterCard.Brand=d.createClass({displayName:"Brand",render:function(){return d.createElement("div",{className:"card-branding"},d.createElement("span",{className:"brand-name"},this.props.data.brand),d.createElement("div",{clasName:"cf"}))}})},buildCard:function(a){""!=a&&b.renderCard(a)},renderCard:function(c){var f=b.emptyCard;d.render(d.createElement(b.PosterCard,{pollInterval:parseInt(a(c).attr("data-poll"))||15e3,autoPoll:a(c).attr("data-poll")==e||isNaN(a(c).attr("data-poll"))?!1:!0,dataAutofill:a(c).attr("data-autofill")||"false",dataBranding:""!=a(c).attr("data-branding")?!0:!1,dataOrientation:a(c).attr("data-orientation")||"left",data:f,dataCreative:""!=a(c).attr("data-creative")?a(c).attr("data-creative"):!1,dataSize:a(c).attr("data-size")||"normal"}),c)},buildArrangement:function(c){if(""!=c){var d=parseInt(a(c).data("rows")),e=parseInt(a(c).data("cols")),f="true"==a(c).data("load-more")||1==a(c).data("load-more")?!0:!1,g=d*e;b.retrieveAds(g,0,e,f,c,b.renderArrangement)}},renderArrangement:function(c,e,f,g,h){var i=""!=a(h).attr("data-branding")&&"false"!=a(h).attr("data-branding")?!0:!1;d.render(d.createElement(b.PosterArrangement,{data:c,loadMore:e,loadCount:c.length/f*f,loadOffset:g,branding:!0===i?!0:!1}),h)}};return b.init()}var h={API:{endpoint:"https://trends.revcontent.com/api/v1/?",api_key:"fdbd849fb2b8c1c259585e7bcd6a09cc87e3e5b7",pub_id:10,widget_id:21,type:"json",domain:"powr.com"}},i=null;return{getInstance:f}}(jQuery,window,document,React);Publicity=d.getInstance()},{}]},{},[1]);